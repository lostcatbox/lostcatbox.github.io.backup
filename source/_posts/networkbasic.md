---
title: 네트워크 기본지식
date: 2020-05-07 12:47:12
categories: [Network]
tags: [Network,Server, Tip, Basic]
---

# 네트워크 기본

[자세히](https://aaasssddd25.tistory.com/9?category=617816 )

## 상식

- LAN  - Local >어느 한정된 공간에서 네트워크를 구성하는것 (사무실 네트워크구성)

- WAN - 서로 멀리 떨어진 곳을 네트워크로 연결하는 것

- 이더넷 - 네트워킹의 한 방식 (우리나라에서는 거의 대부분 이더넷 방식사용),

  이더넷 방식의 가장 큰 특징은 CSMA/CD라는 프로토콜을 사용하여 통신

  (다른 네트워킹의 방식으로 이더넷, 토큰링, FDDI가 있는데 각 방식에 따라 랜카드부터 네트워크 장비들을 다르게 구입해야함)

> **※ CMSA/CD 통신 순서 요약**
>
> 1. 이더넷 환경에서 통신하고 싶은 PC, 서버는 지금 네트워크에 통신이일어나는지 확인
>
>    (이를 Carrier Sense라고 함, 캐리어는 네트워크상의 나타나는 신호임)
>
> 2. 캐리어가 감지되면(누군가 통신을 하고있으면) 자기가 보낼 정보를 보내지 않고 기다림  
>
>    캐리어가 감지가 되지 않으면 **무작정** 자기가 보낼 정보를 네트워크상에 보냄
>
> 3. 만약 다른 PC,서버도 같이 보냈을 경우를 Multiple Access(다중접근)이라고 함
>
>    또한 두개 이상의 장비가 데이터를 보내려다 부딪힌 경우를 Collision(충돌)이 발생했다함 
>
> 4. 따라서 이더넷에서는 충돌이 발생하지 않게 데이터를 보낸뒤 콜리전이 발생 하지 않았는지 점검한다.
>    이걸 Collision Detection(충돌감지)라고 한다.
>
> 5. 콜리전이 발생할 경우 데이터를 전송한 PC들은 랜덤한 시간동안 기다린 다음 다시 데이터를 보냄
>    (이 시간은 사람이 감지하기 힘듬)
>
> 6. 계속해서 충돌이 일어나면 5번을 반복함

- 토큰링(네트워킹방식의 한 종류)

  이더넷과 다르게 한 네트워크상에 딴 한개 존재한 토큰으로 돌아가며 데이터를 보냄(토큰이 몇개 되는경우도 있음)(토큰을 가지고있는 컴퓨터만 데이터를 보낼수있으므로 충돌은 일어나지않지만 받을때까지 기다려야하므로 존나느려 안씀)

- 케이블

  케이블은 장비와 장비의 연결에는 어디에나 들어감

  (pc에서 허브나 스위치까지의 연결, 스위치-스위치, 스위치-라우터)

  (UTP, STP등 존재)

  - 케이블의 종류 : 10 Base T, 10 Base 2 등

    10 Base T : 10Mbps로 통신하고 최대 전송 거리 100미터인 UTP 케이블

    10 Base 2 : 10Mbps로 통신이 가능하고 최대 전송거리 200미터인 케이블

- 맥 어드레스(MAC Address)

  - 통신을 위해서 서로를 구분할 일종의 주소

  - Q) 앞에서는 TCP/IP로만 통신을 한다던데?

    A) 물론 인터넷은 TCP/IP로 통신을 함. 즉, 통신을 위해 IP주소를 사용하지만 맥 어드레스도 사용함

    우리는 IP주소를 다시 MAC주소로 바꾸는 절차 ARP(Address Resolution Protocol)를 사용중임(즉, 네트워크상에서 IP주소를 물리적 네트워크 주소로 대응시키기 위해 사용되는 프로토콜이다. 여기서 물리적 네트워크 주소는 이더넷또는 토큰링의 48비트 네트워크 카드 주소를 뜻함(MAC))

    MAC 주소는 

    00-60-97-8F-4F-86

    00:60:97:8F:4F:86

    0060.978F.4F86

    와 같이 8자리 마다 하이픈,콜론,점으로 구분되어짐

    앞에 6자리는 생산자를 나타내는 코드 (OUI, 회사 제품 넘버)

    뒤에 6자리는 메이커에서 각 장비에 분배하는 Host Identifier이다.(시리얼 넘버)

    즉, 맥 주소 중에서 앞쪽 반은 미리 약속된 규정에 따라 각 네트워크 장비를 만드는 회사에 분배해주고 그 회사에서는 나머지 반을 일련 번호를 만들어 각 장비에 부여하는 것임

    > 이를테면, IP 호스트 A가 IP 호스트 B에게 IP 패킷을 전송하려고 할 때 IP 호스트 B의 물리적 네트워크 주소를 모른다면, [ARP](https://ko.wikipedia.org/wiki/ARP) 프로토콜을 사용하여 목적지 IP 주소 B와 [브로드캐스팅](https://ko.wikipedia.org/wiki/브로드캐스팅) 물리적 네트워크 주소 FFFFFFFFFFFF를 가지는 ARP 패킷을 네트워크 상에 전송한다. IP 호스트 B는 자신의 IP 주소가 목적지에 있는 ARP 패킷을 수신하면 자신의 물리적 네트워크 주소를 A에게 응답한다.
    >
    > 이와 같은 방식으로 수집된 IP 주소와 이에 해당하는 물리적 네트워크 주소 정보는 각 IP 호스트의 ARP 캐시라 불리는 메모리에 테이블 형태로 저장된 다음, 패킷을 전송할 때에 다시 사용된다. ARP와는 반대로, IP 호스트가 자신의 물리 네트워크 주소는 알지만 IP 주소를 모르는 경우, 서버로부터 IP주소를 요청하기 위해 [RARP](https://ko.wikipedia.org/wiki/RARP)를 사용한다.

- 유니캐스트, 브로드캐스트, 멀티캐스트

  - 유니캐스트(Unicast)

    데이터를 보내고자 하는 PC의 맥 어드레스 : 00-60-80-AA-BB-CC

    데이터를 받고자 하는 PC의 맥 어드레스 : 00-60-80-DD-EE-FF

    유니캐스트 통신 방식은 받는 PC가 하나여야 한다. (편지 생각)

    1. 어떤 PC가 유니캐스트 프레임을 뿌이게 될 경우 로컬 네트워크 상에 있는 모든 PC들은 일단 이 프레임을 받아들여서 랜카드에서 자신의 맥 어드레스와 비교

    2. 자신의 랜카드 맥 어드레스와 목적지 맥 어드레스가 서로 다른경우 바로 그 프레임을 버림

       (CPU에 영향이 X, PC의 성능저하 X)

    3. 만약 자신의 랜카드 맥어드레스와 목적지 맥 어드레스가 서로 일치할경우 랜카드는 이 프레임을 CPU로 올려보냄

       (유니캐스트는 현재 네트워크에서 가장 많이 사용되는 통신 방식임)

  - 브로드캐스트(Broadcast)

    브로드 캐스트는 유니캐스트와 다르게 로컬 랜 상에 붙어있는 모든 네트워크 장비들에게 보내는 통신임 (로컬 랜이란 라우터에 의해서 구분지어진 공간, 즉 브로드캐스트 도메인이라는 공간)

    브로드 캐스트는 통신의 대상이 특정 장비가 아닌 내가 살고 있는 네트워크 안의 모든 네트워크 장비들에게 통신할 때 쓰기 위한 방식임 (받는사람이 브로드캐스트 도메인 내 모든 네트웍 장비)

    쉽게 생각해서 이장님의 마이크 방송을 생각하면됨

    듣기 싫어도 무조건 듣게됨

    이처럼 브로드 캐스트 주소(FFFF.FFFF.FFFF)가 자신의 맥 어드레스와 달라도 패킷을 CPU에 보낸다. 그 후 CPU가 알아서 이 패킷을 처리함

    결국 CPU의 성능저하를 불러옴

    > **브로드캐스트는 어떤경우에 발생하는가?** (ARP!)
    >
    > A) 예를들어 처음 2개의 PC간에 통신을 하는경우 상대편의 IP주소는 알아도 맥 어드레스는 모름
    >
    >   이 경우에 상대편의 맥 어드레스를 알아내기 위해서 ARP(IP주소를 맥 주소로 변환)를 한다.
    >
    >   이때 브로드 캐스트가 발생함

  -  **멀티캐스트(Multicast)**

    만약 200명의 사용자가 있는 네트워크에서 150명에게만 같은 정보를 동시에 보내야 하는 상황이라고 가정해보자

    **방법 1) 유니캐스트 이용**

    유니캐스트는 1:1이기때문에 같은 데이터를 총 150번 보내야하므로 네트워크 트래픽을 가중시킴

    **방법 2) 브로드캐스트 이용**

    브로드캐스트는 전체를 상대로 보내기때문에 유니캐스트 처럼 150번 반복은 아니어도 200명중 남은 50명이 쓸모없는 데이터를 받게된다. 브로드캐스트는 CPU로 올려보내기에 PC 성능을 저하시킴

    **방법 3) 멀티캐스트**

    보내고자 하는 인원들에게만 한번에 보낼수 있기 떄문에 이런 경우 제일 유용함

- 

- 

- 

- 

- 

- 

- 

  

  



[자세히](https://jwprogramming.tistory.com/31?category=680194)

# OSI 계층 구조

네트워크는 기기간, 기기와 서버간 통신

![스크린샷 2020-05-07 오후 12.50.45](https://tva1.sinaimg.cn/large/007S8ZIlgy1gejqy66v23j310k0smkh6.jpg)

##데이터 단위

- **PDU(Protocol Data Unit)**는 동일 계층 간에 교환되는 정보의 단위
- **SDU(Service Data Unit)**은 상,하위 계층끼리 주고 받는 정보의 단위

##  각 계층별 기능

- __Physical Layer(물리계층)__

  실제, 전기적 특성에 대한 규칙을 정의, 물리적 전송 매체와 전송 신호 방식 정의

  대표적인 장치 : 통신 케이블 , 리피터, 허브

- __Data Link Layer(데이터 링크 계층)__

  두 개의 인접한 개방 시스템들 간에 신뢰성 있고 효율적인 정보 전송을 할수 있도록함.

  따라서 통신 오류도 찾고 재전송하는 기능이 있음, 또한 맥 어드레스를 가지고 통신 할 수 있게 해줌 (사용되는 통신 단위는 프레임)

  대표적인 장치 : 브리지, 스위치

- __네트워크 계층(Network Layer, 망 계층)__

  개방 시스템들 간의 네트워크 연결을 관리하는 기능과 데이터의 교환 및 중계 기능

  이 계층은 경로를 선택하고 주소를 정하고 경로에 따라 패킷을 전달해주는 것이 이 계층의 역할이다. 

  - IP패킷의 전달 및 라우팅을 담당하고 패킷을 목적지까지 전달하는 역할하는 IP계층도 네트워크 계층의포함됨.

  대표적인 장치 : 라우터, 스위치 

- **전송 계층(Transport Layer)**

  종단 시스템(End-to-End)간에 투명한 데이터 전송을 가능하게 합니다.

  TCP, UDP  등의 표준이 존재함

  **패킷 생성(Assembly/Sequencing/Deassembly/Error detection/Request repeat/Flow control) 및 전송** 담당 계층(상위계층안봐도 전송 계층이 유효한지만 판단하면되도록 설계됨.)

  > 네트워크 상에서는 무수히 많은 데이터가 오고가고, 그에 따라 트래픽 혹은 여러가지 기타 이유로 인하여 패킷이 손실할 수 있는 가능성이 많습니다. 이러한 패킷손실에 대하여 TCP는 신뢰적인 데이터 전송 메카니즘을 가지고 있습니다.
  >
  > UDP 프로토콜의 경우에는 비신뢰적인 네트워크 통신방식이므로 에러를 검출해낼 수 없습니다. 
  >
  > TCP 프로토콜이 신뢰적인 통신 연결방법이므로 이 TCP통신에서 데이터가 전송 될 때 패킷이 깨질 수 있는 가정으로 두어야 합니다.
  >
  > \# 프로토콜이란? 
  >
  > - 대화의 규칙(통신 규약. 신호 송신의 순서, 데이터의 표현법, 오류(誤謬) 검출법 등을 정함)

-  **세션 계층(Session Layer)**

  애플리케이션 간에 세션을 구축하고 관리하면 종료시키는 역할을 합니다.

- **표현 계층(Presentation Layer)**

  응용 계층으로부터 받은 데이터를 세션 계층에 보내기 전에 통신에 적당한 형태로 변환하고, 세션 계층에서 받은 데이터를 응용 계층에 맞게 변환하는 기능을 담당합니다.

- **응용 계층(Application Layer)**

  사용자가 OSI 환경에 접근할 수 있도록 서비스를 제공합니다.





# TCP/IP



# NAT

네트워크 주소 변환(Network Address Translation, 줄여서 NAT)은 IP 패킷의 TCP/UDP 포트 숫자와 소스 및 목적지의 IP 주소 등을 재기록하면서 라우터를 통해 네트워크 트래픽을 주고 받는 기술을 말합니다.

패킷에 변화가 생기기 때문에 IP나 TCP/UDP의 체크섬(checksum)도 다시 계산되어 재기록해야 합니다. NAT를 이용하는 이유는 대개 사설 네트워크에 속한 여러 개의 호스트가 하나의 공인 IP 주소를 사용하여 인터넷에 접속하기 위함입니다.

# DHCP

DHCP란 호스트의 IP주소와 각종 TCP/IP 프로토콜의 기본 설정을 클라이언트에게 자동적으로 제공해주는 프로토콜을 말합니다. DHCP에 대한 표준은 RFC문서에 정의되어 있으며, DHCP는 네트워크에 사용되는 IP주소를 DHCP서버가 중앙집중식으로 관리하는 클라이언트/서버 모델을 사용하게 됩니다. DHCP지원 클라이언트는 네트워크 부팅과정에서 DHCP서버에 IP주소를 요청하고 이를 얻을 수 있습니다.

 

네트워크 안에 컴퓨터에 자동으로 네임 서버 주소, IP주소, 게이트웨이 주소를 할당해주는 것을 의미하고, 해당 클라이언트에게 일정 기간 임대를 하는 동적 주소 할당 프로토콜입니다.

# HTTP, UDP etc..

http, https는 통신 규격으로서 애플리케이션 단에서 풀리고 압축됨. 또한 application(가장 추상적) 에서 통신을 위해서 01010바이너리데이터로 BIT까지 내려가야됨. 그와중에 TCP/IP들의 양식을 통해 Network Data Link Layer에서 요청과 응답간의 통신이 어디로 향해야하는지 정확히 도착했는지에 대한 정보가 다 들어가있다. 

하지만 UDP/IP(최근 추세)로 http/3로 점점 진화중인데 구글아 부탁해

하여튼 양파처럼 생각하면된다. application에서 밖으로 통신에 필요한 정보들을 layer규격으로 하나씩 감싸고 서버에서는 어디로 보내야할지 알아야하므로 Network layer까지 풀었다가 다시 압축해서 통신을 보낸다. 

라우터와 루트 등의 개념도 들어감

